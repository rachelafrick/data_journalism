/*console.log("js/scripts.js connected to index.html");
localStorage.setItem("top-secret-information", "you would never guess what kind of data is stored here."); */
/*
let data1= [
  {
    "location": "United States",
    "employer": "0.496",
    "nongroup": "0.059",
    "medicaid": "0.198",
    "medicare": "0.142",
    "military": "0.014",
    "uninsured": "0.085\r"
  },
  {
    "location": "Alabama",
    "employer": "0.472",
    "nongroup": "0.055",
    "medicaid": "0.195",
    "medicare": "0.16",
    "military": "0.021",
    "uninsured": "0.097\r"
  },
  {
    "location": "Alaska",
    "employer": "0.484",
    "nongroup": "0.035",
    "medicaid": "0.213",
    "medicare": "0.1",
    "military": "0.053",
    "uninsured": "0.115\r"
  },
  {
    "location": "Arizona",
    "employer": "0.451",
    "nongroup": "0.052",
    "medicaid": "0.21",
    "medicare": "0.161",
    "military": "0.015",
    "uninsured": "0.111\r"
  },
  {
    "location": "Arkansas",
    "employer": "0.42",
    "nongroup": "0.054",
    "medicaid": "0.262",
    "medicare": "0.159",
    "military": "0.014",
    "uninsured": "0.091\r"
  },
  {
    "location": "California",
    "employer": "0.48",
    "nongroup": "0.066",
    "medicaid": "0.253",
    "medicare": "0.114",
    "military": "0.009",
    "uninsured": "0.078\r"
  },
  {
    "location": "Colorado",
    "employer": "0.534",
    "nongroup": "0.069",
    "medicaid": "0.168",
    "medicare": "0.128",
    "military": "0.023",
    "uninsured": "0.078\r"
  },
  {
    "location": "Connecticut",
    "employer": "0.529",
    "nongroup": "0.048",
    "medicaid": "0.215",
    "medicare": "0.141",
    "military": "0.007",
    "uninsured": "0.059\r"
  },
  {
    "location": "Delaware",
    "employer": "0.497",
    "nongroup": "0.041",
    "medicaid": "0.204",
    "medicare": "0.173",
    "military": "0.018",
    "uninsured": "0.066\r"
  },
  {
    "location": "Florida",
    "employer": "0.403",
    "nongroup": "0.095",
    "medicaid": "0.174",
    "medicare": "0.18",
    "military": "0.017",
    "uninsured": "0.131\r"
  },
  {
    "location": "Georgia",
    "employer": "0.489",
    "nongroup": "0.056",
    "medicaid": "0.173",
    "medicare": "0.126",
    "military": "0.022",
    "uninsured": "0.134\r"
  },
  {
    "location": "Hawaii",
    "employer": "0.543",
    "nongroup": "0.041",
    "medicaid": "0.176",
    "medicare": "0.159",
    "military": "0.04",
    "uninsured": "0.041\r"
  },
  {
    "location": "Idaho",
    "employer": "0.49",
    "nongroup": "0.086",
    "medicaid": "0.156",
    "medicare": "0.15",
    "military": "0.014",
    "uninsured": "0.105\r"
  },
  {
    "location": "Illinois",
    "employer": "0.546",
    "nongroup": "0.052",
    "medicaid": "0.182",
    "medicare": "0.141",
    "military": "0.007",
    "uninsured": "0.073\r"
  },
  {
    "location": "Indiana",
    "employer": "0.533",
    "nongroup": "0.044",
    "medicaid": "0.177",
    "medicare": "0.148",
    "military": "0.01",
    "uninsured": "0.088\r"
  },
  {
    "location": "Iowa",
    "employer": "0.544",
    "nongroup": "0.049",
    "medicaid": "0.195",
    "medicare": "0.156",
    "military": "0.009",
    "uninsured": "0.047\r"
  },
  {
    "location": "Kansas",
    "employer": "0.543",
    "nongroup": "0.056",
    "medicaid": "0.139",
    "medicare": "0.15",
    "military": "0.02",
    "uninsured": "0.092\r"
  },
  {
    "location": "Kentucky",
    "employer": "0.47",
    "nongroup": "0.039",
    "medicaid": "0.255",
    "medicare": "0.158",
    "military": "0.014",
    "uninsured": "0.064\r"
  },
  {
    "location": "Louisiana",
    "employer": "0.418",
    "nongroup": "0.049",
    "medicaid": "0.293",
    "medicare": "0.137",
    "military": "0.014",
    "uninsured": "0.089\r"
  },
  {
    "location": "Maine",
    "employer": "0.465",
    "nongroup": "0.057",
    "medicaid": "0.2",
    "medicare": "0.183",
    "military": "0.015",
    "uninsured": "0.081\r"
  },
  {
    "location": "Maryland",
    "employer": "0.547",
    "nongroup": "0.054",
    "medicaid": "0.187",
    "medicare": "0.133",
    "military": "0.019",
    "uninsured": "0.059\r"
  },
  {
    "location": "Massachusetts",
    "employer": "0.559",
    "nongroup": "0.054",
    "medicaid": "0.221",
    "medicare": "0.131",
    "military": "0.005",
    "uninsured": "0.03\r"
  },
  {
    "location": "Michigan",
    "employer": "0.509",
    "nongroup": "0.052",
    "medicaid": "0.217",
    "medicare": "0.159",
    "military": "0.006",
    "uninsured": "0.058\r"
  },
  {
    "location": "Minnesota",
    "employer": "0.578",
    "nongroup": "0.052",
    "medicaid": "0.169",
    "medicare": "0.147",
    "military": "0.007",
    "uninsured": "0.048\r"
  },
  {
    "location": "Mississippi",
    "employer": "0.422",
    "nongroup": "0.047",
    "medicaid": "0.242",
    "medicare": "0.142",
    "military": "0.018",
    "uninsured": "0.129\r"
  },
  {
    "location": "Missouri",
    "employer": "0.52",
    "nongroup": "0.057",
    "medicaid": "0.144",
    "medicare": "0.164",
    "military": "0.013",
    "uninsured": "0.101\r"
  },
  {
    "location": "Montana",
    "employer": "0.43",
    "nongroup": "0.08",
    "medicaid": "0.208",
    "medicare": "0.181",
    "military": "0.018",
    "uninsured": "0.083\r"
  },
  {
    "location": "Nebraska",
    "employer": "0.568",
    "nongroup": "0.069",
    "medicaid": "0.126",
    "medicare": "0.142",
    "military": "0.016",
    "uninsured": "0.079\r"
  },
  {
    "location": "Nevada",
    "employer": "0.495",
    "nongroup": "0.055",
    "medicaid": "0.178",
    "medicare": "0.14",
    "military": "0.017",
    "uninsured": "0.115\r"
  },
  {
    "location": "New Hampshire",
    "employer": "0.562",
    "nongroup": "0.053",
    "medicaid": "0.132",
    "medicare": "0.177",
    "military": "0.012",
    "uninsured": "0.064\r"
  },
  {
    "location": "New Jersey",
    "employer": "0.557",
    "nongroup": "0.054",
    "medicaid": "0.166",
    "medicare": "0.138",
    "military": "0.005",
    "uninsured": "0.079\r"
  },
  {
    "location": "New Mexico",
    "employer": "0.366",
    "nongroup": "0.04",
    "medicaid": "0.327",
    "medicare": "0.15",
    "military": "0.018",
    "uninsured": "0.098\r"
  },
  {
    "location": "New York",
    "employer": "0.498",
    "nongroup": "0.058",
    "medicaid": "0.257",
    "medicare": "0.13",
    "military": "0.004",
    "uninsured": "0.053\r"
  },
  {
    "location": "North Carolina",
    "employer": "0.463",
    "nongroup": "0.067",
    "medicaid": "0.179",
    "medicare": "0.153",
    "military": "0.024",
    "uninsured": "0.114\r"
  },
  {
    "location": "North Dakota",
    "employer": "0.557",
    "nongroup": "0.09",
    "medicaid": "0.122",
    "medicare": "0.138",
    "military": "0.021",
    "uninsured": "0.074\r"
  },
  {
    "location": "Ohio",
    "employer": "0.526",
    "nongroup": "0.04",
    "medicaid": "0.2",
    "medicare": "0.159",
    "military": "0.008",
    "uninsured": "0.067\r"
  },
  {
    "location": "Oklahoma",
    "employer": "0.455",
    "nongroup": "0.055",
    "medicaid": "0.17",
    "medicare": "0.151",
    "military": "0.02",
    "uninsured": "0.149\r"
  },
  {
    "location": "Oregon",
    "employer": "0.493",
    "nongroup": "0.057",
    "medicaid": "0.208",
    "medicare": "0.162",
    "military": "0.009",
    "uninsured": "0.071\r"
  },
  {
    "location": "Pennsylvania",
    "employer": "0.518",
    "nongroup": "0.051",
    "medicaid": "0.202",
    "medicare": "0.163",
    "military": "0.008",
    "uninsured": "0.057\r"
  },
  {
    "location": "Rhode Island",
    "employer": "0.54",
    "nongroup": "0.059",
    "medicaid": "0.205",
    "medicare": "0.146",
    "military": "0.008",
    "uninsured": "0.043\r"
  },
  {
    "location": "South Carolina",
    "employer": "0.454",
    "nongroup": "0.061",
    "medicaid": "0.188",
    "medicare": "0.168",
    "military": "0.022",
    "uninsured": "0.108\r"
  },
  {
    "location": "South Dakota",
    "employer": "0.515",
    "nongroup": "0.083",
    "medicaid": "0.128",
    "medicare": "0.161",
    "military": "0.018",
    "uninsured": "0.096\r"
  },
  {
    "location": "Tennessee",
    "employer": "0.478",
    "nongroup": "0.056",
    "medicaid": "0.195",
    "medicare": "0.15",
    "military": "0.018",
    "uninsured": "0.102\r"
  },
  {
    "location": "Texas",
    "employer": "0.476",
    "nongroup": "0.057",
    "medicaid": "0.159",
    "medicare": "0.109",
    "military": "0.016",
    "uninsured": "0.184\r"
  },
  {
    "location": "Utah",
    "employer": "0.605",
    "nongroup": "0.093",
    "medicaid": "0.093",
    "medicare": "0.1",
    "military": "0.012",
    "uninsured": "0.096\r"
  },
  {
    "location": "Vermont",
    "employer": "0.484",
    "nongroup": "0.048",
    "medicaid": "0.239",
    "medicare": "0.175",
    "military": "0.01",
    "uninsured": "0.044\r"
  },
  {
    "location": "Virginia",
    "employer": "0.541",
    "nongroup": "0.052",
    "medicaid": "0.135",
    "medicare": "0.148",
    "military": "0.044",
    "uninsured": "0.08\r"
  },
  {
    "location": "Washington",
    "employer": "0.529",
    "nongroup": "0.05",
    "medicaid": "0.198",
    "medicare": "0.139",
    "military": "0.018",
    "uninsured": "0.066\r"
  },
  {
    "location": "West Virginia",
    "employer": "0.44",
    "nongroup": "0.025",
    "medicaid": "0.266",
    "medicare": "0.19",
    "military": "0.013",
    "uninsured": "0.066\r"
  },
  {
    "location": "Wisconsin",
    "employer": "0.565",
    "nongroup": "0.053",
    "medicaid": "0.161",
    "medicare": "0.155",
    "military": "0.008",
    "uninsured": "0.058\r"
  },
  {
    "location": "Wyoming",
    "employer": "0.511",
    "nongroup": "0.071",
    "medicaid": "0.115",
    "medicare": "0.162",
    "military": "0.018",
    "uninsured": "0.123\r"
  }
]



      var amtuninsured =[];
      var locs=[];
 


      for(var i =1; i<51;i++){
      	amtuninsured.push(data1[i].uninsured)
      	locs.push(data1[i].location)
      }

      console.log("unin "+ amtuninsured)
      console.log("locs "+ locs)

      Plotly.d3.csv('./data/coveragedata.csv', function(err, rows){
      function unpack(rows, key) {
          return rows.map(function(row) { return row[key]; });
      }


      var data2 = [{
          type: 'choropleth',
          locationmode: 'USA-states',
          locations: [ 'AL', 'AK', 'AS', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'DC', 'FM', 'FL', 'GA', 'GU', 'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MH', 'MD', 'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ', 'NM', 'NY', 'NC', 'ND', 'MP', 'OH', 'OK', 'OR', 'PW', 'PA', 'PR', 'RI', 'SC', 'SD', 'TN', 'TX', 'UT', 'VT', 'VI', 'VA', 'WA', 'WV', 'WI', 'WY' ],
          z: amtuninsured,
          text: locs,
          zmin: 0,
          zmax: .2,
          colorscale: [
              [0, 'rgb(242,240,247)'], [0.2, 'rgb(218,218,235)'],
              [0.4, 'rgb(188,189,220)'], [0.6, 'rgb(158,154,200)'],
              [0.8, 'rgb(117,107,177)'], [1, 'rgb(84,39,143)']
          ],
          colorbar: {
              title: 'Percent Uninsured',
              thickness: 0.2
          },
          marker: {
              line:{
                  color: 'rgb(255,255,255)',
                  width: 2
              }
          }
      }];


      var layout = {
          title: 'Percent of uninsured citizens by State',
          geo:{
              scope: 'usa',
              showlakes: true,
              lakecolor: 'rgb(255,255,255)'
          }
      };

      Plotly.newPlot("myDiv", data2, layout, {showLink: false}); 

  }); */


     Plotly.d3.csv('https://raw.githubusercontent.com/plotly/datasets/master/2011_us_ag_exports.csv', function(err, rows){
      function unpack(rows, key) {
          return rows.map(function(row) { return row[key]; });
      }

      console.log("z: " + unpack(rows, 'total exports'))
      console.log("locations: " + unpack(rows, 'code'))

      var data = [{
          type: 'choropleth',
          locationmode: 'USA-states',
          locations: unpack(rows, 'code'),
          z: unpack(rows, 'total exports'),
          text: unpack(rows, 'state'),
          zmin: 0,
          zmax: 17000,
          colorscale: [
              [0, 'rgb(242,240,247)'], [0.2, 'rgb(218,218,235)'],
              [0.4, 'rgb(188,189,220)'], [0.6, 'rgb(158,154,200)'],
              [0.8, 'rgb(117,107,177)'], [1, 'rgb(84,39,143)']
          ],
          colorbar: {
              title: 'Millions USD',
              thickness: 0.2
          },
          marker: {
              line:{
                  color: 'rgb(255,255,255)',
                  width: 2
              }
          }
      }];


      var layout = {
          title: '2011 US Agriculture Exports by State',
          geo:{
              scope: 'usa',
              showlakes: true,
              lakecolor: 'rgb(255,255,255)'
          }
      };

      Plotly.newPlot("myDiv", data, layout, {showLink: false});
}); 




